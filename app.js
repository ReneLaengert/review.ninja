//this is just a quick fix for testing.. we should be able to pass a ca file to the https calls
process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';


var http = require('http');

//////////////////////////////////////////////////////////////////////////////////////////////
// Initialize server
//////////////////////////////////////////////////////////////////////////////////////////////

var app = require('./src/server/app.js');

server = http.createServer(app).listen(config.server.localport).on('listening', function() {
});

//////////////////////////////////////////////////////////////////////////////////////////////
// Initialize websockets
//////////////////////////////////////////////////////////////////////////////////////////////

global.io = require('socket.io').listen(server).sockets;
io.on('connection', function(socket) {
    socket.emit('init', {
        message: 'Welcome!'
    });
});
